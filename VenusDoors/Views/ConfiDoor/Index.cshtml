
@{
    ViewBag.Title = "Build a Door";
    Layout = "~/Views/Shared/_Layout.cshtml";
   
}

<style>
    #GoToSign:hover {
        background-color: #15806f;
        border-color: #15806f;
        cursor: pointer;
    }

    .HPinpt1, .HPinpt2, .HPinpt3, .HPinpt4, .HPinpt5 {
        width: 50px;
        font-size: 11px;
        text-align: center;
        padding: 10px;
    }

    .HPinpt1, .HPinpt2, .HPinpt3, .HPinpt4 {
        margin-right: 3px;
    }

    .hp3, .hp4, .hp5 {
        display: none;
    }

    #iptCost, #iptWidth, #iptHeight, #inputADD, #inputBP{
        width: 80px;
        text-align:center;
    }
</style>

<div class="br-pageheader pd-y-15 pd-l-20">
    <nav class="breadcrumb pd-0 mg-0 tx-12">
        <a class="breadcrumb-item" href="/">Venus Doors</a>
        <span class="breadcrumb-item active">@ViewBag.Title</span>
    </nav>
</div><!-- br-pageheader -->

<div class="br-pagebody">
    <div class="br-section-wrapper">
        <div class="pd-sm-bottom-30">
            <h4 class="tx-gray-800 mg-b-5">Door Configuration</h4>
            <p class="mg-b-0">Modals are streamlined, but flexible, dialog prompts with the minimum required functionality and smart defaults.</p>
        </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="row">
                        <div class="col-xs-4 col-md-3">
                            <label for="txtTemplate" style="margin-top: 25px;">(*) Template / Item Name: </label>
                            <input required class="required RequiereLlenar form-control" onblur="limpia()" maxlength="20" minlength="4" name="txtTemplate" id="txtTemplate" type="text">
                        </div><!-- col -->

                        <div class="col-xs-4 col-md-3">
                            <label for="Material" style="margin-top: 25px;">Wood Species: </label>
                            <select style="width:100%" class="eventChange form-control select2" id="cbMaterial" data-placeholder=""></select>
                        </div><!-- col -->

                        <div name="SoloNumeros" class="col-xs-4 col-md-2">
                            <label for="Width" style="margin-top: 25px;">(*) Width: </label>
                            <input name="SoloNumeros" required class="required RequiereLlenar eventChange iptWidth form-control" type="text" value="0" maxlength="6" oninput="if(this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" id="iptWidth">
                        </div><!-- col -->

                        <div name="SoloNumeros" class="col-xs-4 col-md-2">
                            <label for="Height" style="margin-top: 25px;">(*) Height: </label>
                            <input name="SoloNumeros" required class="required RequiereLlenar eventChange iptHeight form-control" type="text" value="0" maxlength="6" oninput="if(this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" id="iptHeight">
                        </div><!-- col -->
                    </div>
                </div>
            </div>

            <hr>
            <div class="row">
                <div class="col-md-10">
                    <div class="row">
                        <div class="col-xs-4 col-md-3">
                            <label for="DoorStyle" style="margin-top: 25px;">Door Style </label>
                            <select style="width:100%" class="eventChange form-control select2" id="cbDoorStyle" data-placeholder=""></select>
                        </div><!-- col -->

                        <div class="col-xs-4 col-md-3">
                            <label for="InsideEdgeProfile" style="margin-top: 25px;">Inside Edge Profile: </label>
                            <select style="width:100%" class="form-control select2" id="cbInsideEdgeProfile" data-placeholder=""></select>
                        </div><!-- col -->

                        <div class="col-xs-4 col-md-3">
                            <label for="OutsideEdgeProfile" style="margin-top: 25px;">Outside Edge Profile: </label>
                            <select style="width:100%" class="form-control select2" id="cbOutsideEdgeProfile" data-placeholder=""></select>
                        </div><!-- col -->

                        <div class="col-xs-4 col-md-3">
                            <label for="BottomRail" style="margin-top: 25px;">Bottom Rail: </label>
                            <select style="width:100%" class="eventChange form-control select2" id="cbBottomRail" data-placeholder=""></select>
                        </div><!-- col -->

                        <div class="col-xs-4 col-md-3">
                            <label for="TopRail" style="margin-top: 25px;">Top Rail:</label>
                            <select style="width:100%" class="eventChange form-control select2" id="cbTopRail" data-placeholder=""></select>
                        </div><!-- col -->

                        <div class="col-xs-4 col-md-3">
                            <label for="Join" style="margin-top: 25px;">Join: </label>
                            <select style="width:100%" class="form-control select2" id="cbJoin" data-placeholder=""></select>
                        </div><!-- col -->

                        <div class="col-xs-4 col-md-3">
                            <label for="Preparation" style="margin-top: 25px;">Preparation: </label>
                            <select style="width:100%" class="form-control select2" id="cbPreparation" data-placeholder=""></select>
                        </div><!-- col -->

                        <div class="col-xs-4 col-md-3">
                            <label for="Panel" style="margin-top: 25px;">Panel Type: </label>
                            <select style="width:100%" class="form-control select2" id="cbPanel" data-placeholder=""></select>
                        </div><!-- col -->

                        <div class="col-xs-4 col-md-3">
                            <label for="PanelMaterial" style="margin-top: 25px;">Panel Profile: </label>
                            <select style="width:100%" class="form-control select2" id="cbPanelMaterial" data-placeholder=""></select>
                        </div><!-- col -->

                        <div class="col-xs-4 col-md-3">
                            <label for="IsOpeningMeasurement" style="margin-top: 25px;">Opening Measurement: </label>
                            <select style="width:100%" class="form-control select2" id="cbIsOpeningMeasurement" data-placeholder="">
                                <option value="false">No Opening </option>
                                <option value="true">Opening</option>
                            </select>
                        </div><!-- col -->

                        <div class="col-xs-4 col-md-3">
                            <label for="VerticalDivisions" style="margin-top: 25px;">Vertical Divisions: </label>
                            <select style="width:100%" class="form-control select2" id="cbVerticalDivisions" data-placeholder=""></select>
                        </div><!-- col -->

                        <div class="col-xs-4 col-md-3">
                            <label for="HorizontalDivisions" style="margin-top: 25px;">Horizontal Divisions: </label>
                            <select style="width:100%" class="form-control select2" id="cbHorizontalDivisions" data-placeholder=""></select>
                        </div><!-- col -->

                        <div class="col-xs-4 col-md-3">
                            <label for="isDrill" style="margin-top: 25px;">Hinge Drilling: </label>
                            <select style="width:100%" class="form-control select2" id="cbisDrill" data-placeholder="">
                                <option value="false">No Drill</option>
                                <option value="true">Drill</option>
                            </select>
                        </div><!-- col -->

                        <div id="HingeDirectionDiv" style="display:none" class="target col-xs-4 col-md-3">
                            <label for="HingeDirection" style="margin-top: 25px;">Hinge Direction: </label>
                            <select style="width:100%" value="true" class="ocultar select2 form-control" id="cbHingeDirection" data-placeholder="">
                                <option hidden selected value="0" disabled>Select direction</option>
                                <option value="1">Right</option>
                                <option value="2">Left</option>
                                <option value="3" hidden>No Hinge</option>
                            </select>
                        </div><!-- col -->

                        <div id="HingePositionsDiv" style="display:none" class="target col-xs-4 col-md-3">
                            <label for="HingePositions" alue="true" style="margin-top: 25px;">Hinge Positions: </label>
                            <div style="display:flex"><span class="hp1">1: </span><input id="HP1" disabled class="form-control HPinpt1 hp1" /><span class="hp2">2: </span><input id="HP2" disabled class="form-control HPinpt2 hp2" /><span class="hp3">3: </span><input id="HP3" disabled class="form-control HPinpt3 hp3" /><span class="hp4">4: </span><input id="HP4" disabled class="form-control HPinpt4 hp4" /><span class="hp5">5: </span><input id="HP5" disabled class="form-control HPinpt5 hp5" /></div>
                        </div><!-- col -->

                        <div class="col-xs-4 col-md-3">
                            <label for="iptQuantity" style="margin-top: 25px;">(*) Quantity: </label>
                            <input name="iptQuantity" required class="required RequiereLlenar form-control" maxlength="3" minlength="1" onkeypress="return soloNumeros(event);" id="iptQuantity">
                        </div>

                        
                        <div class="col-xs-4 col-md-2">
                            <label for="cost" style="margin-top: 25px;">Item cost: </label>
                            <div class="input-group">
                                <span class="input-group-addon tx-size-sm lh-2">$</span>
                                <input class="form-control" disabled id="iptCost">
                            </div>
                        </div>

                        @if (Session["UserID"] != null && (int)Session["UserType"] == 1)
                        {
                            <div class="col-xs-4 col-md-2">
                                <label for="cost" style="margin-top: 25px;">BP cost: </label>
                                <input class="form-control" disabled id="inputBP">
                            </div>

                            <div class="col-xs-4 col-md-2">
                                <label for="cost" style="margin-top: 25px;">ADD cost: </label>
                                <input class="form-control" disabled id="inputADD">
                            </div>
                        }
                        else if (Session["UserID"] != null && (int)Session["UserType"] == 2)
                        {
                            <div style="display:none" class="col-xs-4 col-md-2">
                                <label for="cost" style="margin-top: 25px;">BP cost: </label>
                                <input class="form-control" disabled id="inputBP">
                            </div>

                            <div style="display:none" class="col-xs-4 col-md-2">
                                <label for="cost" style="margin-top: 25px;">ADD cost: </label>
                                <input class="form-control" disabled id="inputADD">
                            </div>
                        }
                        else
                        {
                            <div style="display:none" class="col-xs-4 col-md-2">
                                <label for="cost" style="margin-top: 25px;">BP cost: </label>
                                <input class="form-control" disabled id="inputBP">
                            </div>

                            <div style="display:none" class="col-xs-4 col-md-2">
                                <label for="cost" style="margin-top: 25px;">ADD cost: </label>
                                <input class="form-control" disabled id="inputADD">
                            </div>
                        }
                    </div>
                </div>
              
                
                    <div class="col-md-2">
                        <div id="Picture" class="row" style="margin-right: 0px;">
                            <center>
                                <img id="ImgProfile" style="height: 100px;width: 260px;margin-top: 20px;" src="" />
                                <img id="Image" style="width: 230px;height: 230px;" src="">
                                @*<a class="Cursor Door" value=""><img style="width: 130px;" src="" /></a>*@
                                @*<img class="img-fluid rounded-right" alt="" src="" id="ImagenModal" />*@
                            </center>
                        </div>
                    </div>
                
                
                @if (Session["UserID"] == null)
            {
                    <button class="Cursor btn btn-primary" style="margin-top:15px" id="bt-conf-log">Confirm</button>
                }
                else
                {
                    <button class="Cursor btn btn-primary" @*onclick="this.disabled=true;"*@ style="margin-top:15px" id="btConfirm">Confirm</button>
                }
            </div>
</div>
</div>

<div id="ui-datepicker-div" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>


@section scripts{

    <script type="text/javascript">
        var urlGetAllMaterial = '@Url.Action("GetAllMaterial", "ConfiDoor")';
        var urlGetAllDoorStyle = '@Url.Action("GetAllDoorStyle", "ConfiDoor")';
        var urlGetAllInsideEdgeProfile = '@Url.Action("GetAllInsideEdgeProfile", "ConfiDoor")';
        var urlGetAllOutsideEdgeProfile = '@Url.Action("GetAllOutsideEdgeProfile", "ConfiDoor")';
        var urlGetAllBottomRail = '@Url.Action("GetAllBottomRail", "ConfiDoor")';
        var urlGetAllTopRail = '@Url.Action("GetAllTopRail", "ConfiDoor")';
        var urlGetAllJoin = '@Url.Action("GetAllJoin", "ConfiDoor")';
        var urlGetAllPreparation = '@Url.Action("GetAllPreparation", "ConfiDoor")';
        var urlGetAllPanel = '@Url.Action("GetAllPanel", "ConfiDoor")';
        var urlGetAllPanelMaterial = '@Url.Action("GetAllPanelMaterial", "ConfiDoor")';
        var urlGetAllVerticalDivisions = '@Url.Action("GetAllVerticalDivisions", "ConfiDoor")';
        var urlGetAllHorizontalDivisions = '@Url.Action("GetAllHorizontalDivisions", "ConfiDoor")';
        var urlGetAllHingePositions = '@Url.Action("GetAllHingePositions", "ConfiDoor")';
        var urlInsertDoorsxUser = '@Url.Action("InsertDoorsxUser", "ConfiDoor")';
        var urlGetPrices = '@Url.Action("GetPrices", "ConfiDoor")';
        var urlValidateSession = '@Url.Action("ValidateSession", "ConfiDoor")';
    </script>

    

    @Scripts.Render("~/Scripts/js/ConfigDoor.Index.js")
    <script src="~/Content/lib/select2/js/select2.min.js"></script>
    <script src="~/Content/lib/select2/js/select2.full.min.js"></script>
    <script>
      $(function(){
        'use strict'

        $('.form-layout .form-control').on('focusin', function(){
          $(this).closest('.form-group').addClass('form-group-active');
        });

        $('.form-layout .form-control').on('focusout', function(){
          $(this).closest('.form-group').removeClass('form-group-active');
        });

        // Select2
        $('#select2-a, #select2-b').select2({
          minimumResultsForSearch: Infinity
        });

        $('#select2-a').on('select2:opening', function (e) {
          $(this).closest('.form-group').addClass('form-group-active');
        });

        $('#select2-a').on('select2:closing', function (e) {
          $(this).closest('.form-group').removeClass('form-group-active');
        });

      });
    </script>

    <script type="text/javascript">
          $("#cbisDrill").change(function () {
              if (this.value = true) {
                  $("#HingeDirectionDiv").css('display', 'block');
                  $("#HingePositionsDiv").css('display', 'block');
              } else {
                  $("#HingeDirectionDiv").css('display', 'none');
                  $("#HingePositionsDiv").css('display', 'none');
              }
          })
    </script>

    <script type="text/javascript">
           function validarFormulario(){
               $("#validate").validate(function() {
                   if ($('.RequiereLlenar').val() === '') {
                       $('#modalPrueba').modal('toggle');

                   } else {

                   }
               })
           }
           $(document).ready(function () {
               validarFormulario();
           });
    </script>
    <style type="text/number">
        .error {
            color: #f00;
        }
    </style>
    <script>
        function soloLetras(e) {
            key = e.keyCode || e.which;
            tecla = String.fromCharCode(key).toLowerCase();
            letras = " áéíóúabcdefghijklmnñopqrstuvwxyz";
            especiales = [8, 37, 39, 46];

            tecla_especial = false
            for (var i in especiales) {
                if (key == especiales[i]) {
                    tecla_especial = true;
                    break;
                }
            }

            if (letras.indexOf(tecla) == -1 && !tecla_especial)
                return false;
        }

        function limpia() {
            var val = document.getElementById("miInput").value;
            var tam = val.length;
            for (i = 0; i < tam; i++) {
                if (!isNaN(val[i]))
                    document.getElementById("miInput").value = '';
            }
        }

        function soloNumeros(e) {
            key = e.keyCode || e.which;
            tecla = String.fromCharCode(key).toLowerCase();
            letras = " 0123456789";
            especiales = [8, 37, 39, 46];

            tecla_especial = false
            for (var i in especiales) {
                if (key == especiales[i]) {
                    tecla_especial = true;
                    break;
                }
            }

            if (letras.indexOf(tecla) == -1 && !tecla_especial)
                return false;
        }

        //function soloNumeros(e) {
        //    key = e.keyCode || e.which;
        //    tecla = String.fromCharCode(key).toLowerCase();
        //    numeros = "0123456789";
        //    especiales = [8, 37, 39, 46];

        //    tecla_especial = false
        //    for (var i in especiales) {
        //        if (key == especiales[i]) {
        //            tecla_especial = true;
        //            break;
        //        }
    //    }
        window.addEventListener("load", function() {
            SoloNumeros.SoloNumeros.addEventListener("keypress", soloNumeros, false);
        });

        //Solo permite introducir numeros.
        function soloNumeros(e){
            var key = window.event ? e.which : e.keyCode;
            if (key < 48 || key > 57) {
                e.preventDefault();
            }

            var keynum = window.event ? window.event.keyCode : e.which;
            if (document.getElementById(thix.id).value.indexOf('.') != -1 && keynum == 46)
                return false;
            if ((keynum == 8 || keynum == 48 || keynum == 46))
                return true;
            if (keynum <= 47 || keynum >= 58) return false;
            return /\d/.test(String.fromCharCode(keynum));

            if (letras.indexOf(tecla) == -1 && !tecla_especial)
                return false;
        }
</script>

<script type="text/javascript">

    $(document).ready(function () {
        var listDoors = JSON.parse('@Html.Raw(ViewBag.Door)');
        $(document).on('click', '.Door', function (event) {
          SearchDoor(listDoors);
        });

    function SearchDoor(data) {
        if (data != null) {
            for (var i = 0; i < data.length; i++) {
               
                    console.log(data[i]);
                    var HTMLImage =
                       // '<img class="img-fluid rounded-right" alt="' + data[i].Material.Description + '" src="' + data[i].Picture + '"/>';
                   ' <center> <img style="height: 100px;width: 260px;margin-top: 20px;" src="' + data[i].ProfilePicture + '" />' +
                               '<img style="width: 230px;height: 230px;" src="' + data[i].Picture + '"></center>';
                    console.log(data[i].Picture);
                    $('#Picture').html(HTMLImage);
               
            }
        }else{
            alert("lista vacia");}

    }
    })
</script>
}